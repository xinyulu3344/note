## 核心概念

| 概念           | 解释                                           |      |
| -------------- | ---------------------------------------------- | ---- |
| 节点Node       | 一个节点就是一个ES实例，可以理解为一个ES的进程 |      |
| 角色Roles      |                                                |      |
| 索引           |                                                |      |
| 类型：Type     |                                                |      |
| 文档：Document |                                                |      |
| 集群：Cluster  |                                                |      |
| 分片：Shard    |                                                |      |
|                |                                                |      |

### 节点：Node

### 节点角色：Roles

#### 常见角色

- 主节点（Active master）：一般指活跃的主节点，一个集群中只能有一个，主要作用是对集群的管理
- 候选节点（master-eligible）：当主节点发生故障时，参与选举，也就是主节点的替代节点
- 数据节点（data node）：数据节点保存包含已编入索引的文档的分片。数据节点处理数据相关操作，如CRUD、搜索和聚合。这些操作是I/O密集型、内存密集型和CPU密集型的。
- 预处理节点（ingest node）：预处理节点有点类似于logstash的消息管道，所以也叫ingest pipeline，常用于一些数据写入之前的预处理操作

### 索引：Index

一个索引是一个拥有一些相似特征的文档的集合，相当于关系型数据库中的一个数据库。例如，您可以拥有一个客户数据的索引，一个商品目录的索引，以及一个订单数据的索引。一个索引通常使用一个名称（所有字母必须小写）来标识，当针对这个索引的文档执行索引、搜索、更新和删除操作的时候，这个名称被用来指向索引。

#### 索引的组成

- alias：索引别名
- settings：索引设置，常见设置如分片和副本的数量等
- mapping：即映射，定义了索引中包含哪些字段，以及字段的类型，长度，分词器等

### 类型：Type（ES7.x之后版本已删除此概念）

#### 不同ES版本对Type的支持

### 文档：Document

#### 文档基本结构

#### 元数据：meta data

#### 源数据：source data

### 集群：Cluster

#### 自动发现

#### 核心配置

- network.host：提供服务的IP地址，一般配置为本节点所在服务器的内网地址，此配置会导致节点由开发模式转为生产模式，从而触发引导检查
- network.publish_host：即提供服务的IP地址，一般配置为本节点所在服务器的公网地址
- http.port：服务端口号，默认9200，通常范围为9200-9299
- transport.port：节点通信端口，默认9300，通常范围为9300-9399
- discovery.seed_hosts：此设置提供集群中其它候选节点的列表，并且可能处于活动状态。每个地址可以是IP地址，也可以是通过DNS解析为一个或多个IP地址的主机名
- cluster.initial_master_nodes：指定集群初次选举中用到的候选节点，称为集群引导，只在第一次形成集群时需要，如果配置了network.host，则此配置项必须配置。重新启动节点或将新节点添加到现有集群时不要使用此配置

#### 集群的健康值检查

 

### 分片：Shard