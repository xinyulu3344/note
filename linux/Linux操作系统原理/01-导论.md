## 什么是操作系统

- 在计算机硬件和计算机用户之间，扮演了一个中间人的角色。
- 提供一个用户可以方便高效的执行应用程序的环境
- 可以管理计算机硬件的软件

## Interface

硬件 - 硬件

硬件 - 软件

软件 - 软件

## 计算机系统组成

### HARD DISK

主引导扇区（Boot Sector）

硬盘的0柱面、0磁头、1扇区称为主引导扇区。在这个扇区中，存放着一段代码：主引导记录MBR（Main Boot Record），用于硬盘启动时将系统控制权转给用户指定的、在分区表中登记了某个操作操作系统分区

MBR的内容是在硬盘分区时由分区软件写入该扇区的，MBR不属于任何一个操作系统，不会夹带操作系统的性质，具有公共引导的特性

### Bootstrap

Pull oneself up by one's bootstraps

操作系统自己把自己拉起来的过程

1. 打开电源
2. CPU将控制权交给BIOS（基本输入输出系统，存放在CMOS中）
3. BIOS运行一个程序：加电自检程序
4. BIOS确认所有外部设备：硬盘等
5. BIOS找到磁盘的引导区，将其中的主引导程序BootLoader装入内存。（主引导程序是一段代码，可以将OS余下部分装入内存）
6. 引导操作系统结束，操作系统接管计算机
7. 操作系统等待事件发生。

### 中断

- 当有事件（event）发生时，CPU会收到一个中断信号，可以是硬中断，也可以是软中断。
- CPU会停下正在做的工作，转而执行中断处理程序，执行完毕会回到之前被中断的地方继续执行
- 操作系统是一个中断驱动的系统。

### 存储系统

- CPU负责将指令（Instruction）从内存（Memory）读入，所以程序必须在内存中才能运行
- 内存以字节为存储单位，每个字节都有一个地址与之对应。通过load/store指令即可访问指定地址的内存数据：
  - load：将内存数据装入寄存器（Register）
  - store：将寄存器数据写入内存

### I/O结构

存储器只是众多IO设备中的一种。IO设备种类丰富，扩展性强

操作系统中有专门的IO子系统负责管理IO设备

## 计算机系统体系结构

### 单处理器系统

### 多处理器系统

Multiprocessor/Multicore System

有两个或多个紧密通信的CPU，共享计算机总线、时钟、内存和外设等

非对称处理(一个主多从)

对称处理（SMP：Symmetric Muliprocessing），CPU相互独立，有自己的寄存器、缓存。

### 集群系统

若干节点通过网络连接在一起。

## 操作系统结构

### 单用户单道模式

一次只做一个任务。

### 多道程序设计

让CPU和IO设备始终忙碌，提高CPU利用率

### 分时系统

- 也叫多任务系统。是多道程序设计的自然延伸。
- 允许多个用户共享一台计算机
  - 用户只有输入和输出设备
  - 分时系统为每个用户轮流分配等量的CPU时间
  - 用户从发出指令到得到即时结果的时间称为响应时间
- 第一个分时系统CTSS由MIT于1962年开发出来

### 引发的其他模式

- 处理器调度
- 交换
- 虚拟内存
- 磁盘管理
- 同步
- 死锁