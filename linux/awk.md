# awk

```bash
awk [options] 'Pattern{Action}' file
```

```bash
awk '{print}' df.txt
awk '{print $0}' df.txt
awk '{print $NF}' df.txt
awk '{print $(NF-1)}' df.txt
awk '{print $1,$5,$6}' df.txt
awk '{print "disk:"$1,"used:"$5,"mountpoint:"$6}' df.txt
```

## Action

| action |      |      |
| ------ | ---- | ---- |
| print  |      |      |
| printf |      |      |



## Pattern

### BEGIN和END

BEGIN模式的作用就是，在开始逐行处理文本之前，先执行BEGIN模式所指定的动作。

END模式就是在处理完所有的指定的文本之后，需要指定的动作。

```bash
awk 'BEGIN{print "处理文本前操作..."} {print $1,$5,$6} END{print "理文本后操作..."}' df.txt
```

### 关系运算模式

awk支持的关系运算符如下：

| 关系运算符 | 含义                   | 用法示例  |
| ---------- | ---------------------- | --------- |
| <          | 小于                   | NR<10     |
| <=         | 小于等于               | NR<=10    |
| ==         | 等于                   | NR==10    |
| !=         | 不等于                 | NR!=10    |
| >          | 大于                   | NR>10     |
| >=         | 大于等于               | NR>=10    |
| ~          | 与对应的正则匹配为真   | x~/正则/  |
| !~         | 与对应的正则不匹配为真 | x!~/正则/ |

### 空模式

匹配每一行

### 正则模式

### 行范围模式



## 内置变量

| 变量     | 含义                                                         | 默认值   |
| -------- | ------------------------------------------------------------ | -------- |
| FS       | 输入字段分隔符                                               | 空白字符 |
| OFS      | 输出字段分隔符                                               | 空白字符 |
| RS       | 输入记录分隔符(输入换行符)， 指定输入时的换行符              |          |
| ORS      | 输出记录分隔符（输出换行符），输出时用指定符号代替换行符     |          |
| NF       | number of Field，当前行的字段的个数(即当前行被分割成了几列)，字段数量 |          |
| NR       | 行号，当前处理的文本行的行号。                               |          |
| FNR      | 各文件分别计数的行号                                         |          |
| FILENAME | 当前文件名                                                   |          |
| ARGC     | 命令行参数的个数                                             |          |
| ARGV     | 数组，保存的是命令行所给定的各参数                           |          |

